<div *ngIf="isAvatarModal" id="myModal" class="modal">
    <div id="myCont" class="modal-content">
        <header class="avatar-modal-header"> Change Avatar Name </header>
        <body class="avatar-modal-outer">
            <input maxlength="15" class="avatar-modal-input" type="text" [(ngModel)]="newAvatarName" placeholder="Enter name">
        </body>
        <footer style="text-align: right">
            <button class="btn btn-primary" (click)="createNewAvatar()"> Submit </button>
            <button class="btn" (click)="closeModal()"> Cancel </button>
        </footer>
    </div>
</div>

<div *ngIf="isChatModal" id="myModal" class="chatModal">
    <div id="myCont" style="border: solid lightgray 1px;" class="chatModal-content">
        <header class="chat-modal-header">
            <div style="margin-top:5px; float:left"> {{selectedChat.owner.name}} </div>
            <div class="chat-header-options">
                <i  style="margin-left:5px; display:inline-block" class="fa fa-ellipsis-v"></i>
                <i *ngIf="selectedChat.owner.user === id" style="margin-left:5px; display:inline-block" class="fa fa-edit"> Edit </i>
                <i *ngIf="selectedChat.owner.user === id" style="margin-left:5px; display:inline-block" class="fa fa-remove"> Delete </i>
                <i *ngIf="selectedChat.owner.user !== id" style="margin-left:5px; display:inline-block" class="fa fa-thumbs-o-down">Report</i>
            </div>
        </header>
        <div class="chat-created-date">
            {{selectedChat.createdDate}}
        </div>

        <body style="width:100%;">
            <p class="chat-modal-body">
                {{selectedChat.body}}
            </p>
            <div *ngIf="selectedChat.post.length > 0" style="height:130px; overflow-y: auto">
                <div *ngFor="let item of selectedChat.post" class="comment-main-div">
                    <div class="comment-avatar_name">
                        <strong>{{item.avatar.name}}</strong>
                    </div>
                    <div class="comment-body">{{item.body}} </div>
                    <div class="comment-createdDate"> {{item.createdDate}} </div>
                </div>
            </div>
            <div class="chat-header-likescomments-div">
                <label *ngIf="selectedChat.likes.length > 0"> {{selectedChat.likes.length}}</label>
                <label *ngIf="selectedChat.likes.length == 0"></label>
                <i (click)="createNewChatlike(selectedChat._id)" class="fa fa-heart-o"></i>
                <label *ngIf="selectedChat.post.length > 0" style="margin-left:10px"> {{selectedChat.post.length}}</label>
                <label *ngIf="selectedChat.post.length == 0" style="margin-left:10px"></label>
                <i class="fa fa-comment-o"></i>
            </div>
            <input class="chat-modal-input" [ngModel]="message" (ngModelChange)="postMessageChanged($event,selectedChat._id)" placeholder="Enter your comment"
                type="text" />
        </body>
        <footer style="text-align: right">
            <button class="btn" (click)="createNewPost(selectedChat)"> Submit </button>
            <button class="btn" (click)="closeChatModal()"> Cancel </button>
        </footer>
    </div>
</div>

<div class="chat-component-main-div">
    <div class="chat-outer-div">
        <header class="new-chat-as-header">
            <div class="new-chat-outer-div">
                <div>

                    <body (click)="openAvatarModal()" class="avatar-name">Posting as
                        <strong> {{listOfAvatars[listOfAvatars.length-1].name}} </strong>
                    </body>
                </div>
                <input type="text" class="input-no-border-100" maxlength="30" [(ngModel)]="chatTitle" placeholder="Title" />
                <textarea class="input-no-border-100" maxlength="1001" [(ngModel)]="chatBody" placeholder="Body"></textarea>
                <button style="display: block" class="btn btn-primary" (click)="createNewChat()"> post </button>
            </div>
        </header>
        <div *ngFor="let chat of listOfChats">
            <div class="chat-card-main-div">
                <div class="chat-card-main-div-header">
                    <div class="chat-header-tittle"> {{chat.owner.name}} </div>
                    <div class="avatar-name">
                        <i style="color: gray" class="fa fa-ellipsis-v"></i>
                        <i *ngIf="chat.owner.user === id" style="margin-left: 5px;" class="fa fa-edit"> Edit </i>
                        <i *ngIf="chat.owner.user === id" style="margin-left: 5px;" class="fa fa-remove"> delete </i>
                        <i *ngIf="chat.owner.user !== id" style="margin-left: 5px;" class="fa fa-thumbs-o-down"> report </i>
                    </div>
                </div>
                <div class="chat-created-date"> {{chat.createdDate}} </div>
                <hr class="hr-division">
                <p (click)="openChatModal(chat)" class="chat-body">
                    {{chat.body}}
                </p>
                <div (click)="openChatModal()" class="outer-comment-div">
                    <div *ngIf="chat.post.length > 0" style="overflow-y: auto">
                        <div class="comment-main-div" *ngFor="let item of chat.post">
                            <div class="comment-avatar_name">
                                <strong>{{item.avatar.name}}</strong>
                            </div>
                            <div class="comment-body"> {{item.body}} </div>
                            <div class="comment-createdDate"> {{item.createdDate}} </div>
                        </div>
                    </div>
                </div>
                <footer class="chat-footer">
                    <label class="chat-likes-comment-labels" *ngIf="chat.likes.length > 0">{{chat.likes.length}} </label>
                    <label class="chat-likes-comment-labels" *ngIf="chat.likes.length == 0"></label>
                    <i (click)="createNewChatlike(chat._id)" style="font-size: 80%" class="fa fa-heart-o"></i>
                    <label class="chat-likes-comment-labels" *ngIf="chat.post.length > 0">{{chat.post.length}} </label>
                    <label class="chat-likes-comment-labels" *ngIf="chat.post.length == 0"> </label>
                    <i style="font-size: 80%;" class="fa fa-comment-o fa-1x"></i>
                    <input type="text" [ngModel]="message" maxlength="709" (ngModelChange)="postMessageChanged($event,chat._id)" placeholder="Enter your comment"
                        class="comment-input">
                    <i class=" comment-send-icon fa fa-send" style="color: steelblue" (click)="createNewPost(chat)"></i>
                </footer>
            </div>
        </div>